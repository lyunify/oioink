{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="col-lg-8 offset-lg-2">
    <form class="chatgpt-form" id="chatgpt-form" method="post" enctype="multipart/form-data">{% csrf_token %}
        <div class="h5 text-center mb-3 font-weight-normal">ChatGPT</div>

        <!--------------------------- chatgpt message --------------------------->
        <!-- input_message -->
        <div class="form-floating mb-3">
            <input type="text" name="input_message" id="id_input_message" class="form-control"
                placeholder="Ask your question" required autofocus>
            <label for="id_input_message">Ask your question:</label>
        </div>
        <!-- output_message -->
        {% if user_message %}
        <div class="card user-message mb-1">
            <div class="card-body">{{ user_message }}</div>
        </div>
        <div class="card ai-message">
            <div class="card-body">{{ ai_message | safe }}</div>
        </div>
        <br>
        <div class="d-grid gap-2 d-flex justify-content-end">
            <a class="btn btn-outline-primary" href="{% url 'chatgpt:regen_chatgpt' %}">Regenerate</a>
        </div>
        {% endif %}
        <br>
        <!--------------------------- end chatgpt message ----------------------->

        {% if form.errors %}
        <ul style="list-style-type:none;">
            {% for field in form %}
            {% for error in field.errors %}
            <div class="alert alert-danger">
                <li>{{ field.label }}: {{ error|escape }}</li>
            </div>
            {% endfor %}
            {% endfor %}
            {% for error in form.non_field_errors %}
            <div class="alert alert-danger">
                <li>{{ field.label }}: {{ error|escape }}</li>
            </div>
            {% endfor %}
        </ul>
        {% endif %}
        <br>
    </form>
</div>

{% endblock content %}